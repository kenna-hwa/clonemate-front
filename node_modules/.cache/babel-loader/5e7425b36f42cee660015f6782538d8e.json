{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\soomin\\\\clonemate-front\\\\src\\\\components\\\\main\\\\Feed.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$();\n\nimport React, { useEffect, useState, useRef } from \"react\";\nimport { useRecoilState, useRecoilValue } from \"recoil\";\nimport { useHistory } from \"react-router-dom\";\nimport { useForm } from \"react-hook-form\";\nimport AdapterDateFns from '@mui/lab/AdapterDateFns';\nimport LocalizationProvider from '@mui/lab/LocalizationProvider';\nimport CalendarPicker from '@mui/lab/CalendarPicker';\nimport { ko } from \"date-fns/locale\";\nimport { Button, List, ListItem, ListItemText, Modal } from \"@mui/material\";\nimport { Box } from \"@mui/system\";\nimport LibraryBooksIcon from '@material-ui/icons/LibraryBooks';\nimport MoreHorizIcon from '@material-ui/icons/MoreHoriz';\nimport CheckBoxIcon from '@material-ui/icons/CheckBox';\nimport CheckBoxOutlineBlankIcon from '@material-ui/icons/CheckBoxOutlineBlank';\nimport EditIcon from '@material-ui/icons/Edit';\nimport SkipNextIcon from '@material-ui/icons/SkipNext';\nimport SyncAltIcon from '@material-ui/icons/SyncAlt';\nimport WrapTextIcon from '@material-ui/icons/WrapText';\nimport DeleteOutlineIcon from '@material-ui/icons/DeleteOutline';\nimport BorderColorIcon from '@material-ui/icons/BorderColor';\nimport '../../stylesheets/Feed.css';\nimport { objTodosDataResult, goalsData, todoData, datesData, selectedNewDate } from \"../../atoms/todoData\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Feed() {\n  _s();\n\n  /* Hook 선언 시작 */\n\n  /* atom 시작 */\n  let dateData = useRecoilValue(datesData);\n  let goal = useRecoilValue(goalsData);\n  let [originTodo, setOriginTodo] = useRecoilState(todoData);\n  let todo = [...originTodo];\n  let [dtTodos, setDtTodos] = useRecoilState(objTodosDataResult);\n  let [calendarOpen, setCalendarOpen] = useState('false');\n  let dtToday = dateData.dtToday;\n  let dtTomorrow = dateData.dtTomorrow;\n  const [modalOpen, setModalOpen] = useState(false);\n  let [isGoalSelected, setIsGoalSelected] = useState(Array(goal.length).fill(false));\n  let [todoReadOnly, setTodoReadOnly] = useState(Array(todo.length).fill(true)); // console.log(\"inputREAD\" , todoReadOnly)\n\n  let [selectedTodo, setSelectedTodo] = useState(\"\");\n  let [selectedInputIndex, setSelectedInputIndex] = useState(\"\");\n  let history = useHistory();\n  /* Hook 선언 끝 */\n\n  /* 함수 선언 시작 */\n  //목표 클릭 시 이벤트 핸들러\n\n  const clickCreateTodoHandler = e => {\n    const index = e.currentTarget.dataset.index;\n    const newArr = Array(goal.length).fill(false);\n    newArr[index] = true;\n    setIsGoalSelected(newArr);\n  };\n  /* 모달 관련 */\n  //투두 클릭 시 모달 등장 이벤트 핸들러\n\n\n  const clickTodoModalHandler = e => {\n    // console.log(\"click index\", e.currentTarget.dataset.key)\n    const index = parseInt(e.currentTarget.dataset.index);\n    if (todoReadOnly[index] === false) return false;\n    handleTodoModalOpen();\n    setSelectedTodo(selectedTodo = todo[index]);\n    setSelectedInputIndex(index);\n  }; // 투두 클릭시 모달 노출 on off\n\n\n  const handleTodoModalOpen = () => setModalOpen(true);\n\n  const handleTodoModalClose = () => setModalOpen(false); // 투두 클릭시 캘린더 노출 on off\n\n\n  const handleCalendarModalOpen = () => setCalendarOpen(true);\n\n  const handleCalendarModalClose = () => setCalendarOpen(false); //모달 내부 이벤트\n  //엔터키 인식 readonly 변경\n\n\n  const enterKeyEventHandler = e => {\n    if (e.key === 'Enter') {\n      inputLostFocusEventHandler();\n    }\n  }; //외부 클릭 readonly 변경\n\n\n  const inputLostFocusEventHandler = e => {\n    let newArr = Array(todo.length).fill(true);\n    setTodoReadOnly(newArr);\n  }; //투두 수정 이벤트 핸들러\n\n\n  const clickTodoEditHandler = e => {\n    console.log(\"현재 인덱스 \", e.currentTarget.dataset.index);\n    const index = parseInt(e.currentTarget.dataset.index);\n    const newArr = Array(todo.length).fill(true);\n    newArr[index] = false;\n    console.log(\"newArr[index]\", index, newArr[index], newArr);\n    setTodoReadOnly(newArr);\n    handleTodoModalClose();\n  };\n\n  const todoEditEventHandler = e => {\n    console.log(\"현재 인덱스 \", e.currentTarget.dataset.index);\n    let index = parseInt(e.currentTarget.dataset.index);\n    let value = e.target.value;\n    const originTodo = JSON.parse(JSON.stringify(todo)); // todo State 원본 카피\n\n    originTodo[index].title = value; // if(value.length > 34) alert(\"글자 수는 35자까지입니다.\");\n    // console.log(\"change\",originTodo[index].title)\n\n    setOriginTodo(originTodo); //setOriginTodo를 이용해 state 변경\n  }; //투두 체크박스 클릭 이벤트 핸들러\n\n\n  const todoCheckBoxEventHandler = e => {\n    e.stopPropagation();\n    let index = parseInt(e.currentTarget.dataset.index);\n    console.log(\"check click\", e.target.dataset.index);\n    const originTodo = JSON.parse(JSON.stringify(todo)); // todo State 원본 카피\n    // console.log(\"originTodo\", originTodo)\n\n    if (originTodo[index].check_yn === 'Y') {\n      originTodo[index].check_yn = 'N';\n    } else {\n      originTodo[index].check_yn = 'Y';\n    }\n\n    ;\n    setOriginTodo(originTodo); //setOriginTodo를 이용해 state 변경\n  }; //투두 내일 하기 이벤트 핸들러 \n\n\n  const todoDelayNextDayEventHandler = e => {\n    console.log(e.currentTarget);\n    let index = parseInt(e.currentTarget.dataset.index);\n    console.log(index);\n    const originTodo = JSON.parse(JSON.stringify(todo)); // todo State 원본 카피\n\n    originTodo[index].date = dtTomorrow;\n    originTodo[index].end_repeat_date = dtTomorrow;\n    setOriginTodo(originTodo); //setOriginTodo를 이용해 state 변경\n\n    handleTodoModalClose();\n  }; //투두 날짜 바꾸기 이벤트 핸들러\n\n\n  const todoChangeDateEventHandler = e => {\n    let dtNewDate = e.currentTarget.dataset.day;\n    let index = parseInt(e.currentTarget.dataset.index);\n    const originTodo = JSON.parse(JSON.stringify(todo)); // todo State 원본 카피\n\n    originTodo[index].date = dtNewDate;\n    originTodo[index].end_repeat_date = dtNewDate;\n    setOriginTodo(originTodo); //setOriginTodo를 이용해 state 변경\n\n    handleTodoModalClose();\n    handleCalendarModalClose();\n  }; //투두 삭제 이벤트 핸들러 -> 나중에는 삭제가 아니라 바로 ajax로 Delete 메소드 던지는게 빠르지 않을까욧\n\n\n  const clickTodoDeleteHandler = e => {\n    console.log(\"현재 인덱스 \", e.currentTarget.dataset.index);\n    let index = parseInt(e.currentTarget.dataset.index);\n    const originTodo = [...todo]; // todo State 원본 카피\n    // console.log(\"originTodo\",originTodo)\n\n    originTodo.splice(index, 1); //원본 todo 배열에서 해당 index 찾아서 1개 삭제\n\n    setOriginTodo(originTodo); //setOriginTodo를 이용해 state 변경\n\n    handleTodoModalClose();\n  };\n  /* 함수 선언 끝 */\n\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      className: \"feed-box\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"feed-title\",\n        children: \"Feed\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        className: \"feed-goals-list-box\",\n        children: /*#__PURE__*/_jsxDEV(List, {\n          className: \"goals-list-wrap\",\n          children: goal.map((goal, index) => {\n            return /*#__PURE__*/_jsxDEV(ListItem, {\n              className: \"goals-listItem\",\n              id: goal.goal_id,\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                className: \"goals-listItem-text-wrap\",\n                isselected: isGoalSelected[index],\n                id: goal.goal_id,\n                onClick: e => {\n                  clickCreateTodoHandler(e);\n                },\n                \"data-index\": index,\n                children: [/*#__PURE__*/_jsxDEV(LibraryBooksIcon, {\n                  className: \"goals-listItem-icon\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 193,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n                  className: \"goals-listItem-text\",\n                  id: goal.goal_id,\n                  name: goal.goal_id,\n                  sx: {\n                    color: goal.title_color\n                  },\n                  children: goal.title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 194,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n                  className: \"goals-listItem-add-icon\",\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"+\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 195,\n                    columnNumber: 80\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 195,\n                  columnNumber: 29\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 192,\n                columnNumber: 25\n              }, this), todo.map((todo, index) => {\n                // {console.log(\"todo\", todo.check_yn)}\n                return /*#__PURE__*/_jsxDEV(Box, {\n                  className: \"goals-todo-input-list-Box\",\n                  onClick: clickTodoModalHandler,\n                  \"data-index\": index,\n                  children: goal.goal_id === parseInt(todo.goal_id) ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"goals-todo-input-list-check-wrap\",\n                      children: [todo.check_yn === 'Y' ? /*#__PURE__*/_jsxDEV(CheckBoxIcon, {\n                        className: \"goals-todo-list-input-check-icon\",\n                        onClick: todoCheckBoxEventHandler,\n                        \"data-index\": index\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 204,\n                        columnNumber: 59\n                      }, this) : /*#__PURE__*/_jsxDEV(CheckBoxOutlineBlankIcon, {\n                        className: \"goals-todo-list-input-check-icon\",\n                        onClick: todoCheckBoxEventHandler,\n                        \"data-index\": index\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 204,\n                        columnNumber: 177\n                      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                        id: \"todo-input\",\n                        className: \"goals-todo-list-input\",\n                        type: \"text\",\n                        maxLength: \"80\",\n                        name: todo.title,\n                        \"data-index\": index,\n                        readOnly: todoReadOnly[index],\n                        value: todo.title,\n                        onChange: todoEditEventHandler,\n                        onKeyDown: enterKeyEventHandler,\n                        onBlur: inputLostFocusEventHandler\n                      }, `todo${index}`, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 205,\n                        columnNumber: 37\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 203,\n                      columnNumber: 33\n                    }, this), /*#__PURE__*/_jsxDEV(Button, {\n                      className: \"goals-todo-list-input-btn\",\n                      children: /*#__PURE__*/_jsxDEV(MoreHorizIcon, {\n                        className: \"goals-todo-list-input-btn-icon\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 211,\n                        columnNumber: 80\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 211,\n                      columnNumber: 33\n                    }, this)]\n                  }, void 0, true) : null\n                }, index, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 200,\n                  columnNumber: 33\n                }, this);\n              }), isGoalSelected[index] ? /*#__PURE__*/_jsxDEV(CreateInput, {\n                id: goal.goal_id,\n                isGoalSelected: isGoalSelected,\n                setIsGoalSelected: setIsGoalSelected,\n                dtToday: dtToday\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 217,\n                columnNumber: 50\n              }, this) : null]\n            }, goal.goal_id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 30\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"feed-move-to-routines\",\n        title: \"\\uAE30\\uAC04\\uC774 \\uC788\\uB294 \\uD560 \\uC77C \\uC791\\uC131\\uD558\\uAE30\",\n        onClick: () => {\n          history.push(\"/routines\");\n        },\n        children: /*#__PURE__*/_jsxDEV(BorderColorIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 121\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(TodoModal, {\n      modalOpen: modalOpen,\n      handleTodoModalClose: handleTodoModalClose,\n      selectedTodo: selectedTodo,\n      clickTodoEditHandler: clickTodoEditHandler,\n      clickTodoDeleteHandler: clickTodoDeleteHandler,\n      selectedInputIndex: selectedInputIndex,\n      todoDelayNextDayEventHandler: todoDelayNextDayEventHandler,\n      calendarOpen: calendarOpen,\n      handleCalendarModalOpen: handleCalendarModalOpen,\n      handleCalendarModalClose: handleCalendarModalClose,\n      todoChangeDateEventHandler: todoChangeDateEventHandler\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n} // input 생성\n\n_s(Feed, \"2VQtEll5wRB7aubANd9N/h4flho=\", false, function () {\n  return [useRecoilValue, useRecoilValue, useRecoilState, useRecoilState, useHistory];\n});\n\n_c = Feed;\nexport function CreateInput(props) {\n  _s2();\n\n  let id = props.id;\n  const dtToday = props.dtToday;\n  const isGoalSelected = props.isGoalSelected;\n  const setIsGoalSelected = props.setIsGoalSelected;\n  /* Hook 선언 시작 */\n\n  /* atom 시작 */\n\n  const {\n    register,\n    handleSubmit,\n    errors,\n    watch\n  } = useForm({\n    mode: \"onChange\"\n  });\n  let [todo, setTodo] = useRecoilState(todoData);\n  let [createTodoState, setCreactTodoState] = useState({\n    \"todo_id\": \"\",\n    \"goal_id\": \"\",\n    //묶여있는 goal id\n    \"next_todo_id\": \"\",\n    //다음 todo id (순서지정용)\n    \"title\": \"\",\n    \"date\": \"\",\n    \"end_repeat_date\": \"\",\n    //반복 종료 일자. 반복 없으면 date 와 값이 같거나 없음\n    \"repeat_days\": {\n      \"sun\": \"N\",\n      //y 면 일요일 반복, n 이면 반복 x\n      \"mon\": \"N\",\n      \"tue\": \"N\",\n      \"wed\": \"N\",\n      \"thu\": \"N\",\n      \"fri\": \"N\",\n      \"sat\": \"N\"\n    },\n    \"check_yn\": \"N\" //달성여부\n\n  });\n  let createInput = useRef();\n  useEffect(() => {\n    const inputElement = createInput.current;\n    inputElement.focus();\n  }, []);\n  /* Hook 선언 끝 */\n\n  /* 함수 선언 시작 */\n  //input 함수\n\n  const onChangeTitleEventHandler = e => {\n    setCreactTodoState({ ...createTodoState,\n      title: e.target.value\n    }); // console.log(createTodoState)\n  }; //todo 추가 함수\n\n\n  const addTodo = (data, id) => {\n    const copy_todo_state = [...todo]; //추가되는 state 'todo_id', 'goal_id', 'next_todo_id', 'date', 'end_repeat_date'\n    // 'repeat_days'와 'check_yn'은 default 값 \"N\" , \n\n    data.todo_id = copy_todo_state.length;\n    data.goal_id = parseInt(id); //key를 위한 id 추가\n\n    data.next_todo_id = copy_todo_state.length + 1;\n    data.date = dtToday;\n    data.end_repeat_date = dtToday;\n    copy_todo_state.push(data);\n    setTodo(copy_todo_state, console.log(copy_todo_state));\n  };\n\n  const onSubmit = data => {\n    const index = data.goal_id;\n    const newArr = [...isGoalSelected];\n    setIsGoalSelected(newArr[index] = false);\n    setCreactTodoState(JSON.stringify(createTodoState));\n    addTodo(createTodoState, index);\n  };\n\n  const onError = error => {\n    console.log(error);\n  };\n  /* 함수 선언 끝 */\n\n\n  return /*#__PURE__*/_jsxDEV(Box, {\n    className: \"goals-todo-input-create-Box\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit(onSubmit, onError),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"goals-todo-input-create-wrap\",\n        children: [/*#__PURE__*/_jsxDEV(CheckBoxOutlineBlankIcon, {\n          className: \"goals-todo-input-create-check-icon\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", { ...register(\"title\"),\n          ref: createInput,\n          id: \"todo-input\",\n          className: \"goals-todo-input-create-field\",\n          placeholder: \"\\uD560 \\uC77C\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\",\n          type: \"text\",\n          maxLength: \"35\",\n          onChange: onChangeTitleEventHandler,\n          onBlur: handleSubmit(onSubmit, onError)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", { ...register(\"goal_id\"),\n          id: \"todo-goal-id-input\",\n          className: \"todo-goal-create-id\",\n          type: \"hidden\",\n          value: id\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"submit\",\n          className: \"goals-todo-input-btn\",\n          children: /*#__PURE__*/_jsxDEV(MoreHorizIcon, {\n            className: \"goals-todo-list-input-btn-icon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 76\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 315,\n    columnNumber: 13\n  }, this);\n}\n\n_s2(CreateInput, \"JIzb38+ilcJ1Zd3t4iP4MboFWfg=\", false, function () {\n  return [useForm, useRecoilState];\n});\n\n_c2 = CreateInput;\nexport function TodoModal(props) {\n  const modalOpen = props.modalOpen;\n  const handleTodoModalClose = props.handleTodoModalClose;\n  const selectedTodo = props.selectedTodo;\n  const clickTodoEditHandler = props.clickTodoEditHandler;\n  const selectedInputIndex = props.selectedInputIndex;\n  const clickTodoDeleteHandler = props.clickTodoDeleteHandler;\n  const todoDelayNextDayEventHandler = props.todoDelayNextDayEventHandler;\n  const calendarOpen = props.calendarOpen;\n  const handleCalendarModalOpen = props.handleCalendarModalOpen;\n  const handleCalendarModalClose = props.handleCalendarModalClose;\n  const todoChangeDateEventHandler = props.todoChangeDateEventHandler;\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(DatePickerCalender, {\n      calendarOpen: calendarOpen,\n      handleCalendarModalOpen: handleCalendarModalOpen,\n      selectedInputIndex: selectedInputIndex,\n      handleCalendarModalClose: handleCalendarModalClose,\n      handleTodoModalClose: handleTodoModalClose,\n      todoChangeDateEventHandler: todoChangeDateEventHandler\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 346,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      open: modalOpen,\n      onClose: handleTodoModalClose,\n      \"aria-labelledby\": \"modal-modal-title\",\n      \"aria-describedby\": \"modal-modal-description\",\n      className: \"feed-todo-modal-box\",\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        className: \"feed-todo-modal-wrap\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"feed-todo-modal-head\",\n          children: selectedTodo.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          className: \"feed-todo-modal-icon-wrap\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"feed-todo-edit-icon\",\n            \"data-index\": selectedInputIndex,\n            onClick: clickTodoEditHandler,\n            children: [/*#__PURE__*/_jsxDEV(EditIcon, {\n              className: \"feed-modal-icon\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 357,\n              columnNumber: 125\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\uC218\\uC815\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 357,\n              columnNumber: 165\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 357,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"feed-todo-delay-icon\",\n            \"data-index\": selectedInputIndex,\n            onClick: todoDelayNextDayEventHandler,\n            children: [/*#__PURE__*/_jsxDEV(SkipNextIcon, {\n              className: \"feed-modal-icon\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 358,\n              columnNumber: 134\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\uB0B4\\uC77C \\uD558\\uAE30\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 358,\n              columnNumber: 178\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 358,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"feed-todo-date-change-icon\",\n            \"data-index\": selectedInputIndex,\n            children: [/*#__PURE__*/_jsxDEV(SyncAltIcon, {\n              className: \"feed-modal-icon\",\n              onClick: handleCalendarModalOpen\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 359,\n              columnNumber: 101\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\uB0A0\\uC9DC \\uBC14\\uAFB8\\uAE30\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 359,\n              columnNumber: 178\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 359,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"feed-todo-order-change-icon\",\n            \"data-index\": selectedInputIndex,\n            children: [/*#__PURE__*/_jsxDEV(WrapTextIcon, {\n              className: \"feed-modal-icon\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 360,\n              columnNumber: 102\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\uC21C\\uC11C \\uBCC0\\uACBD\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 360,\n              columnNumber: 146\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"feed-todo-delete-icon\",\n            \"data-index\": selectedInputIndex,\n            onClick: clickTodoDeleteHandler,\n            children: [/*#__PURE__*/_jsxDEV(DeleteOutlineIcon, {\n              className: \"feed-modal-icon\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 361,\n              columnNumber: 130\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\uC0AD\\uC81C\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 361,\n              columnNumber: 179\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 361,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 354,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 348,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n}\n_c3 = TodoModal;\nexport function DatePickerCalender(props) {\n  _s3();\n\n  const selectedInputIndex = props.selectedInputIndex;\n  const [selectedNewDate, setSelectedNewDate] = useState(new Date());\n  const week = new Array('일', '월', '화', '수', '목', '금', '토');\n  const calendarOpen = props.calendarOpen;\n  const handleCalendarModalClose = props.handleCalendarModalClose;\n  const handleTodoModalClose = props.handleTodoModalClose;\n  const todoChangeDateEventHandler = props.todoChangeDateEventHandler;\n  const selectedDate = selectedNewDate.toJSON().substring(0, 10);\n  let selectedYear = selectedNewDate.getFullYear();\n  let selectedMonth = selectedNewDate.getMonth() + 1;\n  let selectedDay = selectedNewDate.getDate();\n  let selectedLabel = selectedNewDate.getDay();\n  let todayLabel = week[selectedLabel];\n  useEffect(() => {\n    handleTodoModalClose();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    open: calendarOpen,\n    onClose: handleCalendarModalClose,\n    \"aria-labelledby\": \"modal-modal-title\",\n    \"aria-describedby\": \"modal-modal-description\",\n    className: \"todo-modal-datePicker-wrap\",\n    children: /*#__PURE__*/_jsxDEV(Box, {\n      className: \"todo-modal-datePicker-box\",\n      children: /*#__PURE__*/_jsxDEV(LocalizationProvider, {\n        locale: ko,\n        dateAdapter: AdapterDateFns,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"todo-modal-datePicker-box-title-wrap\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"\\uC120\\uD0DD\\uD55C \\uB0A0\\uC9DC\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 402,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: selectedYear + `년 ` + selectedMonth + `월 ` + selectedDay + `일 ` + todayLabel + `요일`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 403,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(CalendarPicker, {\n          className: \"todo-modal-datePicker\",\n          date: selectedNewDate,\n          onChange: newDate => setSelectedNewDate(newDate)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 405,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"todo-modal-datePicker-btn-wrap\",\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            className: \"todo-modal-datePicker-btn\",\n            \"data-index\": selectedInputIndex,\n            \"data-day\": selectedDate,\n            onClick: todoChangeDateEventHandler,\n            children: \"\\uD655\\uC778\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 407,\n            columnNumber: 17\n          }, this), \" \", /*#__PURE__*/_jsxDEV(Button, {\n            className: \"todo-modal-datePicker-btn\",\n            onClick: handleCalendarModalClose,\n            children: \"\\uCDE8\\uC18C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 407,\n            columnNumber: 168\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 406,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 400,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 399,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 393,\n    columnNumber: 9\n  }, this);\n}\n\n_s3(DatePickerCalender, \"EV7ifr9wjI2ZWS5rrdrmLJlTNLQ=\");\n\n_c4 = DatePickerCalender;\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"Feed\");\n$RefreshReg$(_c2, \"CreateInput\");\n$RefreshReg$(_c3, \"TodoModal\");\n$RefreshReg$(_c4, \"DatePickerCalender\");","map":{"version":3,"sources":["C:/Users/soomin/clonemate-front/src/components/main/Feed.js"],"names":["React","useEffect","useState","useRef","useRecoilState","useRecoilValue","useHistory","useForm","AdapterDateFns","LocalizationProvider","CalendarPicker","ko","Button","List","ListItem","ListItemText","Modal","Box","LibraryBooksIcon","MoreHorizIcon","CheckBoxIcon","CheckBoxOutlineBlankIcon","EditIcon","SkipNextIcon","SyncAltIcon","WrapTextIcon","DeleteOutlineIcon","BorderColorIcon","objTodosDataResult","goalsData","todoData","datesData","selectedNewDate","Feed","dateData","goal","originTodo","setOriginTodo","todo","dtTodos","setDtTodos","calendarOpen","setCalendarOpen","dtToday","dtTomorrow","modalOpen","setModalOpen","isGoalSelected","setIsGoalSelected","Array","length","fill","todoReadOnly","setTodoReadOnly","selectedTodo","setSelectedTodo","selectedInputIndex","setSelectedInputIndex","history","clickCreateTodoHandler","e","index","currentTarget","dataset","newArr","clickTodoModalHandler","parseInt","handleTodoModalOpen","handleTodoModalClose","handleCalendarModalOpen","handleCalendarModalClose","enterKeyEventHandler","key","inputLostFocusEventHandler","clickTodoEditHandler","console","log","todoEditEventHandler","value","target","JSON","parse","stringify","title","todoCheckBoxEventHandler","stopPropagation","check_yn","todoDelayNextDayEventHandler","date","end_repeat_date","todoChangeDateEventHandler","dtNewDate","day","clickTodoDeleteHandler","splice","map","goal_id","color","title_color","push","CreateInput","props","id","register","handleSubmit","errors","watch","mode","setTodo","createTodoState","setCreactTodoState","createInput","inputElement","current","focus","onChangeTitleEventHandler","addTodo","data","copy_todo_state","todo_id","next_todo_id","onSubmit","onError","error","TodoModal","DatePickerCalender","setSelectedNewDate","Date","week","selectedDate","toJSON","substring","selectedYear","getFullYear","selectedMonth","getMonth","selectedDay","getDate","selectedLabel","getDay","todayLabel","newDate"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\r\nimport { useRecoilState, useRecoilValue } from \"recoil\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport AdapterDateFns from '@mui/lab/AdapterDateFns';\r\nimport LocalizationProvider from '@mui/lab/LocalizationProvider';\r\nimport CalendarPicker from '@mui/lab/CalendarPicker';\r\nimport { ko } from \"date-fns/locale\";\r\n\r\n\r\nimport {  Button, List, ListItem, ListItemText, Modal, } from \"@mui/material\";\r\nimport { Box } from \"@mui/system\";\r\nimport LibraryBooksIcon from '@material-ui/icons/LibraryBooks';\r\nimport MoreHorizIcon from '@material-ui/icons/MoreHoriz';\r\nimport CheckBoxIcon from '@material-ui/icons/CheckBox';\r\nimport CheckBoxOutlineBlankIcon from '@material-ui/icons/CheckBoxOutlineBlank';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport SkipNextIcon from '@material-ui/icons/SkipNext';\r\nimport SyncAltIcon from '@material-ui/icons/SyncAlt';\r\nimport WrapTextIcon from '@material-ui/icons/WrapText';\r\nimport DeleteOutlineIcon from '@material-ui/icons/DeleteOutline';\r\nimport BorderColorIcon from '@material-ui/icons/BorderColor';\r\n\r\nimport '../../stylesheets/Feed.css'\r\nimport { objTodosDataResult, goalsData, todoData, datesData, selectedNewDate } from \"../../atoms/todoData\";\r\n\r\n\r\nexport default function Feed() {\r\n\r\n\r\n/* Hook 선언 시작 */\r\n\r\n/* atom 시작 */\r\n\r\n    let dateData = useRecoilValue(datesData);\r\n    let goal = useRecoilValue(goalsData);\r\n\r\n    let [originTodo, setOriginTodo] = useRecoilState(todoData);\r\n    let todo = [...originTodo];\r\n\r\n    let [dtTodos, setDtTodos] = useRecoilState(objTodosDataResult);\r\n\r\n\r\n\r\n    let [calendarOpen, setCalendarOpen] = useState('false');\r\n    \r\n    let dtToday = dateData.dtToday;\r\n    let dtTomorrow = dateData.dtTomorrow;\r\n\r\n    const [modalOpen, setModalOpen] = useState(false);\r\n\r\n\r\n    let [isGoalSelected, setIsGoalSelected] = useState(Array(goal.length).fill(false) );\r\n    let [todoReadOnly, setTodoReadOnly] = useState(Array(todo.length).fill(true));\r\n    // console.log(\"inputREAD\" , todoReadOnly)\r\n    let [selectedTodo, setSelectedTodo] = useState(\"\");\r\n    let [selectedInputIndex, setSelectedInputIndex] = useState(\"\");\r\n\r\n\r\n    let history = useHistory();\r\n\r\n/* Hook 선언 끝 */\r\n\r\n/* 함수 선언 시작 */\r\n\r\n//목표 클릭 시 이벤트 핸들러\r\nconst clickCreateTodoHandler = (e) => {\r\n    const index = e.currentTarget.dataset.index;\r\n    const newArr = Array(goal.length).fill(false) ;\r\n    newArr[index] = true;\r\n    setIsGoalSelected(newArr)\r\n}\r\n\r\n/* 모달 관련 */\r\n\r\n//투두 클릭 시 모달 등장 이벤트 핸들러\r\nconst clickTodoModalHandler = (e) => {\r\n    // console.log(\"click index\", e.currentTarget.dataset.key)\r\n    const index = parseInt(e.currentTarget.dataset.index);\r\n    if(todoReadOnly[index] === false) return false;\r\n    handleTodoModalOpen()\r\n    setSelectedTodo(selectedTodo = todo[index])\r\n    setSelectedInputIndex(index);\r\n}\r\n\r\n// 투두 클릭시 모달 노출 on off\r\nconst handleTodoModalOpen = () => setModalOpen(true);\r\nconst handleTodoModalClose = () => setModalOpen(false);\r\n\r\n// 투두 클릭시 캘린더 노출 on off\r\nconst handleCalendarModalOpen = () => setCalendarOpen(true);\r\nconst handleCalendarModalClose = () => setCalendarOpen(false);\r\n\r\n//모달 내부 이벤트\r\n\r\n//엔터키 인식 readonly 변경\r\nconst enterKeyEventHandler = (e) => {\r\n    if(e.key === 'Enter'){ \r\n        inputLostFocusEventHandler()\r\n     }\r\n}\r\n\r\n//외부 클릭 readonly 변경\r\nconst inputLostFocusEventHandler = (e) => {\r\n    let newArr = Array(todo.length).fill(true);\r\n    setTodoReadOnly(newArr)\r\n}\r\n\r\n//투두 수정 이벤트 핸들러\r\nconst clickTodoEditHandler = (e) => {\r\n    console.log(\"현재 인덱스 \", e.currentTarget.dataset.index)\r\n    const index = parseInt(e.currentTarget.dataset.index);\r\n    const newArr = Array(todo.length).fill(true);\r\n    newArr[index] = false;\r\n    console.log(\"newArr[index]\", index, newArr[index], newArr)\r\n    setTodoReadOnly(newArr)\r\n    handleTodoModalClose();\r\n}\r\n\r\nconst todoEditEventHandler = (e) => {\r\n    console.log(\"현재 인덱스 \", e.currentTarget.dataset.index)\r\n    let index = parseInt(e.currentTarget.dataset.index);\r\n    let value = e.target.value;\r\n    const originTodo = JSON.parse(JSON.stringify(todo)); // todo State 원본 카피\r\n    originTodo[index].title = value;\r\n    // if(value.length > 34) alert(\"글자 수는 35자까지입니다.\");\r\n    // console.log(\"change\",originTodo[index].title)\r\n    setOriginTodo(originTodo) ;//setOriginTodo를 이용해 state 변경\r\n}\r\n\r\n//투두 체크박스 클릭 이벤트 핸들러\r\nconst todoCheckBoxEventHandler = (e) => {\r\n    e.stopPropagation(); \r\n    let index = parseInt(e.currentTarget.dataset.index);\r\n    console.log(\"check click\" , e.target.dataset.index)\r\n    const originTodo = JSON.parse(JSON.stringify(todo)); // todo State 원본 카피\r\n    // console.log(\"originTodo\", originTodo)\r\n    if(originTodo[index].check_yn === 'Y'){\r\n        originTodo[index].check_yn = 'N'\r\n    } else {\r\n        originTodo[index].check_yn = 'Y'\r\n    };\r\n    setOriginTodo(originTodo) ;//setOriginTodo를 이용해 state 변경\r\n}\r\n\r\n//투두 내일 하기 이벤트 핸들러 \r\nconst todoDelayNextDayEventHandler = (e) => {\r\n    console.log(e.currentTarget)\r\n    let index = parseInt(e.currentTarget.dataset.index);\r\n    console.log(index)\r\n    const originTodo = JSON.parse(JSON.stringify(todo)); // todo State 원본 카피\r\n    originTodo[index].date = dtTomorrow;\r\n    originTodo[index].end_repeat_date = dtTomorrow;\r\n    setOriginTodo(originTodo) ;//setOriginTodo를 이용해 state 변경\r\n    handleTodoModalClose();\r\n}\r\n\r\n//투두 날짜 바꾸기 이벤트 핸들러\r\nconst todoChangeDateEventHandler = (e) => {\r\n    let dtNewDate = e.currentTarget.dataset.day;\r\n    let index = parseInt(e.currentTarget.dataset.index);\r\n    const originTodo = JSON.parse(JSON.stringify(todo)); // todo State 원본 카피\r\n    originTodo[index].date = dtNewDate;\r\n    originTodo[index].end_repeat_date = dtNewDate;\r\n    setOriginTodo(originTodo) ;//setOriginTodo를 이용해 state 변경\r\n    handleTodoModalClose();\r\n    handleCalendarModalClose();\r\n}\r\n\r\n//투두 삭제 이벤트 핸들러 -> 나중에는 삭제가 아니라 바로 ajax로 Delete 메소드 던지는게 빠르지 않을까욧\r\nconst clickTodoDeleteHandler = (e) => {\r\n    console.log(\"현재 인덱스 \", e.currentTarget.dataset.index)\r\n    let index = parseInt(e.currentTarget.dataset.index);\r\n    const originTodo = [...todo]; // todo State 원본 카피\r\n    // console.log(\"originTodo\",originTodo)\r\n    originTodo.splice(index, 1) //원본 todo 배열에서 해당 index 찾아서 1개 삭제\r\n    setOriginTodo(originTodo) ;//setOriginTodo를 이용해 state 변경\r\n    handleTodoModalClose();\r\n}\r\n\r\n/* 함수 선언 끝 */\r\n\r\n    return (<>\r\n        \r\n        <Box className='feed-box'>\r\n        <h2 className=\"feed-title\">Feed</h2>\r\n            <Box className=\"feed-goals-list-box\">\r\n                <List className=\"goals-list-wrap\" >\r\n                    {\r\n                    goal.map((goal, index) => {\r\n                    return ( <ListItem className=\"goals-listItem\" id={goal.goal_id} key={goal.goal_id} > \r\n                        <Button className=\"goals-listItem-text-wrap\" isselected={isGoalSelected[index]} id={goal.goal_id} onClick={(e)=>{(clickCreateTodoHandler(e))}} data-index={index} >\r\n                        <LibraryBooksIcon className=\"goals-listItem-icon\" />\r\n                                <ListItemText className=\"goals-listItem-text\" id={goal.goal_id} name={goal.goal_id} sx={{ color:goal.title_color }}  >{goal.title}</ListItemText>\r\n                            <ListItemText className=\"goals-listItem-add-icon\" ><span>+</span></ListItemText>\r\n                        </Button>\r\n                        {todo.map((todo,index)=>{\r\n                            // {console.log(\"todo\", todo.check_yn)}\r\n                            return (\r\n                                <Box className=\"goals-todo-input-list-Box\" key={index} onClick={clickTodoModalHandler} data-index={index}>\r\n                              \r\n                                {goal.goal_id === parseInt(todo.goal_id) ? (<>\r\n                                <div className=\"goals-todo-input-list-check-wrap\">\r\n                                {todo.check_yn === 'Y' ?  <CheckBoxIcon className=\"goals-todo-list-input-check-icon\" onClick={todoCheckBoxEventHandler} data-index={index} /> : <CheckBoxOutlineBlankIcon className=\"goals-todo-list-input-check-icon\" onClick={todoCheckBoxEventHandler} data-index={index} /> }\r\n                                    <input key={`todo${index}`} id=\"todo-input\" className=\"goals-todo-list-input\" type=\"text\" maxLength={\"80\"} \r\n                                    name={todo.title} data-index={index} readOnly={todoReadOnly[index]} value={todo.title} \r\n                                    onChange={todoEditEventHandler} onKeyDown={enterKeyEventHandler} \r\n                                    onBlur={inputLostFocusEventHandler}  />\r\n                                    \r\n                                </div>\r\n                                <Button className=\"goals-todo-list-input-btn\" ><MoreHorizIcon className=\"goals-todo-list-input-btn-icon\" /></Button>\r\n                                </>\r\n                                ) : null} \r\n                                </Box>\r\n                            )\r\n                        })}\r\n                        {isGoalSelected[index] ? <CreateInput id={goal.goal_id} isGoalSelected={isGoalSelected} setIsGoalSelected={setIsGoalSelected} dtToday={dtToday} />: null}\r\n                    </ListItem>\r\n                            )\r\n                        })\r\n                    }\r\n                    \r\n\r\n                </List>\r\n            </Box>\r\n            <button className=\"feed-move-to-routines\" title=\"기간이 있는 할 일 작성하기\" onClick={()=>{history.push(\"/routines\")}}><BorderColorIcon /></button>\r\n        </Box>\r\n\r\n        {/* 모달 생성 */}\r\n        <TodoModal modalOpen={modalOpen} handleTodoModalClose={handleTodoModalClose} selectedTodo={selectedTodo} clickTodoEditHandler={clickTodoEditHandler} clickTodoDeleteHandler={clickTodoDeleteHandler} selectedInputIndex={selectedInputIndex} todoDelayNextDayEventHandler={todoDelayNextDayEventHandler} calendarOpen={calendarOpen} handleCalendarModalOpen={handleCalendarModalOpen} handleCalendarModalClose={handleCalendarModalClose} todoChangeDateEventHandler={todoChangeDateEventHandler} />\r\n        </>\r\n    );\r\n}\r\n\r\n// input 생성\r\nexport function CreateInput(props) {\r\n\r\n\r\n    let id = props.id;\r\n    const dtToday = props.dtToday;\r\n    const isGoalSelected = props.isGoalSelected;\r\n    const setIsGoalSelected = props.setIsGoalSelected;\r\n\r\n    /* Hook 선언 시작 */\r\n\r\n    /* atom 시작 */\r\n    const { register, handleSubmit, errors, watch } = useForm({ mode: \"onChange\" });\r\n    let [todo, setTodo] = useRecoilState(todoData);\r\n    let [createTodoState, setCreactTodoState] = useState({\r\n        \"todo_id\": \"\",\r\n        \"goal_id\": \"\", //묶여있는 goal id\r\n        \"next_todo_id\": \"\", //다음 todo id (순서지정용)\r\n        \"title\": \"\",\r\n        \"date\": \"\",\r\n        \"end_repeat_date\": \"\", //반복 종료 일자. 반복 없으면 date 와 값이 같거나 없음\r\n        \"repeat_days\": {\r\n            \"sun\": \"N\", //y 면 일요일 반복, n 이면 반복 x\r\n            \"mon\": \"N\",\r\n            \"tue\": \"N\",\r\n            \"wed\": \"N\",\r\n            \"thu\": \"N\",\r\n            \"fri\": \"N\",\r\n            \"sat\": \"N\",\r\n        },\r\n        \"check_yn\" : \"N\" //달성여부\r\n      });\r\n\r\n    let createInput = useRef();\r\n\r\n    useEffect(() => {\r\n        const inputElement = createInput.current;\r\n        inputElement.focus();\r\n      }, []);\r\n    /* Hook 선언 끝 */\r\n\r\n    /* 함수 선언 시작 */\r\n\r\n    //input 함수\r\n    const onChangeTitleEventHandler = (e) => {\r\n        setCreactTodoState({...createTodoState, title: e.target.value})\r\n        // console.log(createTodoState)\r\n    }\r\n    \r\n    //todo 추가 함수\r\n    const addTodo = (data, id) => {\r\n        const copy_todo_state = [...todo];\r\n        //추가되는 state 'todo_id', 'goal_id', 'next_todo_id', 'date', 'end_repeat_date'\r\n        // 'repeat_days'와 'check_yn'은 default 값 \"N\" , \r\n        data.todo_id = copy_todo_state.length;\r\n        data.goal_id = parseInt(id); //key를 위한 id 추가\r\n        data.next_todo_id = copy_todo_state.length+1;\r\n        data.date = dtToday;\r\n        data.end_repeat_date = dtToday;\r\n        copy_todo_state.push(data);\r\n        setTodo(copy_todo_state, console.log(copy_todo_state))\r\n    }\r\n\r\n    const onSubmit =  (data) => { \r\n        const index = data.goal_id\r\n        const newArr = [...isGoalSelected];\r\n        setIsGoalSelected(newArr[index] = false)\r\n        setCreactTodoState(JSON.stringify(createTodoState));\r\n        addTodo(createTodoState, index);\r\n    }\r\n\r\n    const onError = (error) => {\r\n        console.log(error);\r\n        };\r\n\r\n\r\n\r\n    /* 함수 선언 끝 */\r\n\r\n    return  (\r\n            <Box className=\"goals-todo-input-create-Box\">\r\n                <form onSubmit={handleSubmit(onSubmit,onError)}>\r\n                    <div className=\"goals-todo-input-create-wrap\">\r\n                    <CheckBoxOutlineBlankIcon className=\"goals-todo-input-create-check-icon\"/>\r\n                    <input {...register(\"title\")} ref={createInput} id=\"todo-input\" className=\"goals-todo-input-create-field\"  placeholder=\"할 일을 입력해주세요.\" type=\"text\" maxLength={\"35\"} onChange={onChangeTitleEventHandler} onBlur={handleSubmit(onSubmit, onError)} /> \r\n                    <input {...register(\"goal_id\")} id=\"todo-goal-id-input\" className=\"todo-goal-create-id\" type=\"hidden\" value={id} /> \r\n                    <Button type=\"submit\" className=\"goals-todo-input-btn\"><MoreHorizIcon className=\"goals-todo-list-input-btn-icon\" /></Button>\r\n                    </div>\r\n                </form>\r\n            </Box>\r\n            )\r\n}\r\n\r\n\r\nexport function TodoModal (props) {\r\n\r\n    const modalOpen = props.modalOpen;\r\n    const handleTodoModalClose = props.handleTodoModalClose;\r\n    const selectedTodo = props.selectedTodo;\r\n    const clickTodoEditHandler = props.clickTodoEditHandler;\r\n    const selectedInputIndex = props.selectedInputIndex;\r\n    const clickTodoDeleteHandler = props.clickTodoDeleteHandler;\r\n    const todoDelayNextDayEventHandler = props.todoDelayNextDayEventHandler;\r\n    const calendarOpen = props.calendarOpen;\r\n    const handleCalendarModalOpen = props.handleCalendarModalOpen;\r\n    const handleCalendarModalClose = props.handleCalendarModalClose;\r\n    const todoChangeDateEventHandler = props.todoChangeDateEventHandler;\r\n\r\n\r\n    return(\r\n        <>\r\n        <DatePickerCalender calendarOpen={calendarOpen} handleCalendarModalOpen={handleCalendarModalOpen} selectedInputIndex={selectedInputIndex} handleCalendarModalClose={handleCalendarModalClose} handleTodoModalClose={handleTodoModalClose} todoChangeDateEventHandler={todoChangeDateEventHandler} /> \r\n\r\n        <Modal open={modalOpen}\r\n        onClose={handleTodoModalClose}\r\n        aria-labelledby=\"modal-modal-title\"\r\n        aria-describedby=\"modal-modal-description\"\r\n        className=\"feed-todo-modal-box\"\r\n         >\r\n            <Box className=\"feed-todo-modal-wrap\" >\r\n                <p className=\"feed-todo-modal-head\">{selectedTodo.title}</p>\r\n                <Box className=\"feed-todo-modal-icon-wrap\">\r\n                    <button className=\"feed-todo-edit-icon\" data-index={selectedInputIndex} onClick={clickTodoEditHandler} ><EditIcon className=\"feed-modal-icon\" /><span>수정</span></button>\r\n                    <button className=\"feed-todo-delay-icon\" data-index={selectedInputIndex} onClick={todoDelayNextDayEventHandler} ><SkipNextIcon className=\"feed-modal-icon\" /><span>내일 하기</span></button>\r\n                    <button className=\"feed-todo-date-change-icon\" data-index={selectedInputIndex} ><SyncAltIcon className=\"feed-modal-icon\" onClick={handleCalendarModalOpen} /><span>날짜 바꾸기</span></button>\r\n                    <button className=\"feed-todo-order-change-icon\" data-index={selectedInputIndex} ><WrapTextIcon className=\"feed-modal-icon\" /><span>순서 변경</span></button>\r\n                    <button className=\"feed-todo-delete-icon\" data-index={selectedInputIndex} onClick={clickTodoDeleteHandler}  ><DeleteOutlineIcon className=\"feed-modal-icon\" /><span>삭제</span></button>\r\n                </Box>\r\n            </Box>\r\n\r\n        </Modal>  \r\n        </>\r\n    )\r\n}\r\n\r\nexport function DatePickerCalender(props) {\r\n\r\n    const selectedInputIndex = props.selectedInputIndex;\r\n    const [selectedNewDate, setSelectedNewDate] = useState(new Date());\r\n    const  week = new Array('일', '월', '화', '수', '목', '금', '토');\r\n    const calendarOpen = props.calendarOpen;\r\n    const handleCalendarModalClose = props.handleCalendarModalClose;\r\n    const handleTodoModalClose = props.handleTodoModalClose;\r\n    const todoChangeDateEventHandler = props.todoChangeDateEventHandler;\r\n    const selectedDate = selectedNewDate.toJSON().substring(0,10);\r\n\r\n    let selectedYear = selectedNewDate.getFullYear();\r\n    let selectedMonth = selectedNewDate.getMonth()+1;\r\n    let selectedDay = selectedNewDate.getDate();\r\n    let selectedLabel = selectedNewDate.getDay();\r\n    let todayLabel = week[selectedLabel];\r\n\r\n\r\n    useEffect(()=>{\r\n        handleTodoModalClose()\r\n    },[])\r\n    \r\n    return (\r\n        <Modal open={calendarOpen}\r\n        onClose={handleCalendarModalClose}\r\n        aria-labelledby=\"modal-modal-title\"\r\n        aria-describedby=\"modal-modal-description\"\r\n        className=\"todo-modal-datePicker-wrap\"\r\n         >\r\n        <Box className=\"todo-modal-datePicker-box\">\r\n            <LocalizationProvider locale={ko} dateAdapter={AdapterDateFns}>\r\n                <div className=\"todo-modal-datePicker-box-title-wrap\">\r\n                    <p>선택한 날짜</p>\r\n                    <span>{selectedYear +`년 `+ selectedMonth +`월 `+ selectedDay+ `일 ` + todayLabel + `요일`}</span>\r\n                </div>\r\n                <CalendarPicker className=\"todo-modal-datePicker\" date={selectedNewDate} onChange={(newDate) => setSelectedNewDate(newDate)} />\r\n                <div className=\"todo-modal-datePicker-btn-wrap\">\r\n                <Button className=\"todo-modal-datePicker-btn\" data-index={selectedInputIndex} data-day={selectedDate} onClick={todoChangeDateEventHandler}>확인</Button> <Button className=\"todo-modal-datePicker-btn\" onClick={handleCalendarModalClose}>취소</Button>\r\n                </div>\r\n            </LocalizationProvider>\r\n        </Box>\r\n        </Modal>  \r\n    )\r\n\r\n\r\n}"]},"metadata":{},"sourceType":"module"}