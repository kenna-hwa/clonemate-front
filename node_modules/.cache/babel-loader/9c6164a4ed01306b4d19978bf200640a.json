{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\soomin\\\\clonemate-front\\\\src\\\\components\\\\main\\\\TodoModal.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { Modal } from \"@mui/material\";\nimport React, { useEffect, useState, useRef } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { useRecoilState, useRecoilValue } from \"recoil\";\nimport AdapterDateFns from '@mui/lab/AdapterDateFns';\nimport LocalizationProvider from '@mui/lab/LocalizationProvider';\nimport CalendarPicker from '@mui/lab/CalendarPicker';\nimport { ko } from \"date-fns/locale\";\nimport EditIcon from '@material-ui/icons/Edit';\nimport SkipNextIcon from '@material-ui/icons/SkipNext';\nimport SyncAltIcon from '@material-ui/icons/SyncAlt';\nimport WrapTextIcon from '@material-ui/icons/WrapText';\nimport DeleteOutlineIcon from '@material-ui/icons/DeleteOutline';\nimport { objTodosDataResult, objDatesData } from \"../../atoms/todoData\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport function TodoModal(props) {\n  _s();\n\n  /* hook 선언 시작 */\n  const history = useHistory();\n  /* hook 선언 종료 */\n\n  /* state 선언 시작 */\n\n  /* atom 선언 시작 */\n\n  let dtDate = useRecoilValue(objDatesData);\n  let [dtTodos, setDtTodos] = useRecoilState(objTodosDataResult);\n  let todoDataArray = JSON.parse(JSON.stringify(dtTodos));\n  /* atom 선언 종료 */\n\n  const index = props.index;\n  const todos = props.todos;\n  const [calendarActiveIndex, setCalendarActiveIndex] = useState(null);\n  /* 함수 선언 시작 */\n  //모달 onoff 핸들러\n\n  const modalActive = props.modalActive; //캘린더 onoff 핸들러\n\n  const setModalActiveIndex = props.setModalActiveIndex; //모달 수정 클릭 핸들러\n\n  const todoModalEditHandler = props.todoModalEditHandler; //모달 내일하기 클릭 핸들러 \n\n  const todoModalDelayHandler = e => {\n    const goal_id = parseInt(e.currentTarget.dataset.goalid);\n    const todo_id = parseInt(e.currentTarget.dataset.todoid);\n    todoDataArray.map(data => data.todos.map(todo => {\n      if (todo.goalId === goal_id && todo.todoId === todo_id && todo.date === todo.endRepeatDate) {\n        todo.date = dtDate.dtTomorrow;\n        todo.endRepeatDate = dtDate.dtTomorrow;\n      }\n    }));\n    setModalActiveIndex(null);\n  }; //모달 순서 변경 클릭 핸들러\n\n\n  const todoModalOrderHandler = e => {\n    console.log(e.currentTarget);\n    history.push('/orderitem');\n  }; //모달 삭제 클릭 핸들러\n\n\n  const todoModalDeleteHandler = e => {\n    const goal_id = parseInt(e.currentTarget.dataset.goalid);\n    const todo_id = parseInt(e.currentTarget.dataset.todoid);\n    todoDataArray.map(data => data.todos.map((todo, index) => {\n      if (todo.goalId === goal_id && todo.todoId === todo_id) data.todos.splice(index, 1);\n    }));\n    setDtTodos(todoDataArray); //setDtTodos 이용해 state 변경\n\n    setModalActiveIndex();\n  };\n  /* 함수 선언 종료 */\n\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(DatePickerCalender, {\n      calendarActiveIndex: calendarActiveIndex,\n      setCalendarActiveIndex: setCalendarActiveIndex,\n      setModalActiveIndex: setModalActiveIndex,\n      todos: todos,\n      calendarActive: index === calendarActiveIndex ? true : false\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      open: modalActive,\n      onClose: () => {\n        setModalActiveIndex(null);\n      },\n      \"aria-labelledby\": \"modal-modal-title\",\n      \"aria-describedby\": \"modal-modal-description\",\n      className: \"feed-todo-modal-box\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"feed-todo-modal-wrap\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"feed-todo-modal-head\",\n          children: todos.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"feed-todo-modal-icon-wrap\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"feed-todo-modal-icon feed-todo-edit-icon\",\n            \"data-goalid\": todos.goalId,\n            \"data-todoid\": todos.todoId,\n            onClick: todoModalEditHandler,\n            children: [/*#__PURE__*/_jsxDEV(EditIcon, {\n              className: \"feed-modal-icon\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\uC218\\uC815\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 65\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"feed-todo-modal-icon feed-todo-delay-icon\",\n            \"data-goalid\": todos.goalId,\n            \"data-todoid\": todos.todoId,\n            onClick: todoModalDelayHandler,\n            children: [/*#__PURE__*/_jsxDEV(SkipNextIcon, {\n              className: \"feed-modal-icon\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\uB0B4\\uC77C \\uD558\\uAE30\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 69\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"feed-todo-modal-icon feed-todo-date-change-icon\",\n            \"data-goalid\": todos.goalId,\n            \"data-todoid\": todos.todoId,\n            onClick: () => {\n              setCalendarActiveIndex(todos.todoId); //  console.log(todos.todoId, calendarActiveIndex)\n            },\n            children: [/*#__PURE__*/_jsxDEV(SyncAltIcon, {\n              className: \"feed-modal-icon\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\uB0A0\\uC9DC \\uBC14\\uAFB8\\uAE30\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 68\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"feed-todo-modal-icon feed-todo-order-change-icon\",\n            onClick: todoModalOrderHandler,\n            children: [/*#__PURE__*/_jsxDEV(WrapTextIcon, {\n              className: \"feed-modal-icon\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 138,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\uC21C\\uC11C \\uBCC0\\uACBD\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 138,\n              columnNumber: 69\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"feed-todo-modal-icon feed-todo-delete-icon\",\n            \"data-goalid\": todos.goalId,\n            \"data-todoid\": todos.todoId,\n            onClick: todoModalDeleteHandler,\n            children: [/*#__PURE__*/_jsxDEV(DeleteOutlineIcon, {\n              className: \"feed-modal-icon\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\uC0AD\\uC81C\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 74\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n}\n\n_s(TodoModal, \"BEpNW6aKyj6KFkEquSQMyGehZzs=\", false, function () {\n  return [useHistory, useRecoilValue, useRecoilState];\n});\n\n_c = TodoModal;\nexport function DatePickerCalender(props) {\n  _s2();\n\n  let [dtTodos, setDtTodos] = useRecoilState(objTodosDataResult);\n  let todoDataArray = JSON.parse(JSON.stringify(dtTodos));\n  const todos = props.todos;\n  const new_date = new Date(todos.date);\n  let [newDate, setNewDate] = useState(new_date);\n  const week = new Array('일', '월', '화', '수', '목', '금', '토');\n  const calendarActive = props.calendarActive;\n  const setCalendarActiveIndex = props.setCalendarActiveIndex; //모달 내 선택한 날짜 상단 표시\n\n  const selectedDate = newDate.toJSON().substring(0, 10);\n  let selectedYear = newDate.getFullYear();\n  let selectedMonth = newDate.getMonth() + 1;\n  let selectedDay = newDate.getDate();\n  let selectedLabel = newDate.getDay();\n  let todayLabel = week[selectedLabel]; //모달 날짜 바꾸기 캘린더 확인 핸들러\n\n  const todoModalDateChangeHandler = e => {\n    const goal_id = parseInt(e.currentTarget.dataset.goalid);\n    const todo_id = parseInt(e.currentTarget.dataset.todoid);\n    todoDataArray.map(data => data.todos.map(todo => {\n      if (todo.goalId === goal_id && todo.todoId === todo_id && todo.date === todo.endRepeatDate) {\n        todo.date = selectedDate;\n        todo.endRepeatDate = selectedDate;\n      }\n    }));\n    setCalendarActiveIndex(null);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    open: calendarActive,\n    onClose: () => {\n      setCalendarActiveIndex(null);\n    },\n    \"aria-labelledby\": \"calendar-title\",\n    \"aria-describedby\": \"calendar-description\",\n    className: \"calendar-wrap\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"calendar-box\",\n      children: /*#__PURE__*/_jsxDEV(LocalizationProvider, {\n        locale: ko,\n        dateAdapter: AdapterDateFns,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"calendar-title-wrap\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"\\uC120\\uD0DD\\uD55C \\uB0A0\\uC9DC\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: selectedYear + `년 ` + selectedMonth + `월 ` + selectedDay + `일 ` + todayLabel + `요일`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(CalendarPicker, {\n          className: \"calendar-picker\",\n          date: newDate,\n          onChange: newDate => setNewDate(newDate)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"calendar-btn-box\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"calendar-ok-btn\",\n            \"data-goalid\": todos.goalId,\n            \"data-todoid\": todos.todoId,\n            \"data-selecteddate\": selectedDate,\n            onClick: todoModalDateChangeHandler,\n            children: \"\\uD655\\uC778\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"calendar-cancel-btn\",\n            onClick: () => {\n              setCalendarActiveIndex(null);\n            },\n            children: \"\\uCDE8\\uC18C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 195,\n    columnNumber: 9\n  }, this);\n}\n\n_s2(DatePickerCalender, \"63uguATmOKmUg8g3Zg3jsE+lscI=\", false, function () {\n  return [useRecoilState];\n});\n\n_c2 = DatePickerCalender;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"TodoModal\");\n$RefreshReg$(_c2, \"DatePickerCalender\");","map":{"version":3,"sources":["C:/Users/soomin/clonemate-front/src/components/main/TodoModal.js"],"names":["Modal","React","useEffect","useState","useRef","useHistory","useRecoilState","useRecoilValue","AdapterDateFns","LocalizationProvider","CalendarPicker","ko","EditIcon","SkipNextIcon","SyncAltIcon","WrapTextIcon","DeleteOutlineIcon","objTodosDataResult","objDatesData","TodoModal","props","history","dtDate","dtTodos","setDtTodos","todoDataArray","JSON","parse","stringify","index","todos","calendarActiveIndex","setCalendarActiveIndex","modalActive","setModalActiveIndex","todoModalEditHandler","todoModalDelayHandler","e","goal_id","parseInt","currentTarget","dataset","goalid","todo_id","todoid","map","data","todo","goalId","todoId","date","endRepeatDate","dtTomorrow","todoModalOrderHandler","console","log","push","todoModalDeleteHandler","splice","title","DatePickerCalender","new_date","Date","newDate","setNewDate","week","Array","calendarActive","selectedDate","toJSON","substring","selectedYear","getFullYear","selectedMonth","getMonth","selectedDay","getDate","selectedLabel","getDay","todayLabel","todoModalDateChangeHandler"],"mappings":"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","sourcesContent":["import { Modal } from \"@mui/material\";\r\nimport React, { useEffect, useState, useRef } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport { useRecoilState, useRecoilValue } from \"recoil\";\r\nimport AdapterDateFns from '@mui/lab/AdapterDateFns';\r\nimport LocalizationProvider from '@mui/lab/LocalizationProvider';\r\nimport CalendarPicker from '@mui/lab/CalendarPicker';\r\nimport { ko } from \"date-fns/locale\";\r\n\r\n\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport SkipNextIcon from '@material-ui/icons/SkipNext';\r\nimport SyncAltIcon from '@material-ui/icons/SyncAlt';\r\nimport WrapTextIcon from '@material-ui/icons/WrapText';\r\nimport DeleteOutlineIcon from '@material-ui/icons/DeleteOutline';\r\n\r\nimport { objTodosDataResult, objDatesData } from \"../../atoms/todoData\";\r\n\r\n\r\nexport function TodoModal (props) {\r\n\r\n    /* hook 선언 시작 */\r\n\r\n    const history = useHistory();\r\n\r\n    /* hook 선언 종료 */\r\n\r\n    /* state 선언 시작 */\r\n\r\n    /* atom 선언 시작 */\r\n\r\n    let dtDate = useRecoilValue(objDatesData);\r\n    let [dtTodos, setDtTodos] = useRecoilState(objTodosDataResult);\r\n    let todoDataArray = JSON.parse(JSON.stringify(dtTodos));\r\n\r\n    /* atom 선언 종료 */\r\n\r\n    const index = props.index;\r\n    const todos = props.todos;\r\n    const [calendarActiveIndex, setCalendarActiveIndex] = useState(null);\r\n\r\n\r\n    /* 함수 선언 시작 */\r\n\r\n    //모달 onoff 핸들러\r\n    const modalActive = props.modalActive;\r\n\r\n    //캘린더 onoff 핸들러\r\n    const setModalActiveIndex = props.setModalActiveIndex;\r\n\r\n    //모달 수정 클릭 핸들러\r\n    const todoModalEditHandler = props.todoModalEditHandler;\r\n\r\n\r\n    //모달 내일하기 클릭 핸들러 \r\n    const todoModalDelayHandler = (e) => {\r\n    const goal_id = parseInt(e.currentTarget.dataset.goalid);\r\n    const todo_id = parseInt(e.currentTarget.dataset.todoid);\r\n        todoDataArray.map(data=>\r\n            data.todos.map(todo=>{\r\n                if(todo.goalId === goal_id && todo.todoId === todo_id && todo.date === todo.endRepeatDate){\r\n                todo.date = dtDate.dtTomorrow;\r\n                todo.endRepeatDate = dtDate.dtTomorrow;\r\n                }\r\n            })\r\n        )\r\n        setModalActiveIndex(null)\r\n    }\r\n    \r\n    //모달 순서 변경 클릭 핸들러\r\n    const todoModalOrderHandler = (e) => {\r\n        console.log(e.currentTarget)\r\n        history.push('/orderitem');\r\n    }\r\n\r\n    //모달 삭제 클릭 핸들러\r\n    const todoModalDeleteHandler = (e) => {\r\n        const goal_id = parseInt(e.currentTarget.dataset.goalid);\r\n        const todo_id = parseInt(e.currentTarget.dataset.todoid);\r\n\r\n        todoDataArray.map(data=>\r\n            data.todos.map((todo, index)=>{\r\n                if(todo.goalId === goal_id && todo.todoId === todo_id)  data.todos.splice(index, 1)\r\n            })\r\n        )\r\n        setDtTodos(todoDataArray) ;//setDtTodos 이용해 state 변경\r\n        setModalActiveIndex();\r\n    }\r\n\r\n    /* 함수 선언 종료 */\r\n\r\n    return(\r\n        <>\r\n        {/* {console.log(\"todos.date\", todos.date)} */}\r\n        <DatePickerCalender \r\n        calendarActiveIndex={calendarActiveIndex} \r\n        setCalendarActiveIndex={setCalendarActiveIndex}\r\n        setModalActiveIndex={setModalActiveIndex}\r\n        todos={todos}\r\n        calendarActive={index === calendarActiveIndex? true : false}\r\n        /> \r\n\r\n        <Modal open={modalActive}\r\n        onClose={()=>{setModalActiveIndex(null)}}\r\n        aria-labelledby=\"modal-modal-title\"\r\n        aria-describedby=\"modal-modal-description\"\r\n        className=\"feed-todo-modal-box\"\r\n         >\r\n        \r\n            <div className=\"feed-todo-modal-wrap\" >\r\n                <p className=\"feed-todo-modal-head\">{todos.title}</p>\r\n                <div className=\"feed-todo-modal-icon-wrap\">\r\n                    <button className=\"feed-todo-modal-icon feed-todo-edit-icon\" \r\n                    data-goalid={todos.goalId} data-todoid={todos.todoId} \r\n                    onClick={todoModalEditHandler}\r\n                     >\r\n                        <EditIcon className=\"feed-modal-icon\" /><span>수정</span>\r\n                    </button>\r\n                    <button className=\"feed-todo-modal-icon feed-todo-delay-icon\" \r\n                    data-goalid={todos.goalId} data-todoid={todos.todoId} \r\n                    onClick={todoModalDelayHandler}\r\n                    >\r\n                        <SkipNextIcon className=\"feed-modal-icon\" /><span>내일 하기</span>\r\n                    </button>\r\n                    <button className=\"feed-todo-modal-icon feed-todo-date-change-icon\" \r\n                    data-goalid={todos.goalId} data-todoid={todos.todoId} \r\n                    onClick={()=>{\r\n                        setCalendarActiveIndex(todos.todoId)\r\n                        //  console.log(todos.todoId, calendarActiveIndex)\r\n                        }}\r\n                    >\r\n                        <SyncAltIcon className=\"feed-modal-icon\" /><span>날짜 바꾸기</span>\r\n                    </button>\r\n                    <button className=\"feed-todo-modal-icon feed-todo-order-change-icon\" \r\n                    onClick={todoModalOrderHandler}\r\n                    >\r\n                        <WrapTextIcon className=\"feed-modal-icon\" /><span>순서 변경</span>\r\n                    </button>\r\n                    <button className=\"feed-todo-modal-icon feed-todo-delete-icon\" \r\n                    data-goalid={todos.goalId} data-todoid={todos.todoId} \r\n                    onClick={todoModalDeleteHandler}\r\n                    >\r\n                        <DeleteOutlineIcon className=\"feed-modal-icon\" /><span>삭제</span>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n        </Modal>  \r\n        </>\r\n    )\r\n}\r\n\r\nexport function DatePickerCalender(props) {\r\n\r\n    let [dtTodos, setDtTodos] = useRecoilState(objTodosDataResult);\r\n    let todoDataArray = JSON.parse(JSON.stringify(dtTodos));\r\n    const todos = props.todos;\r\n    const new_date = new Date(todos.date);\r\n    let [newDate, setNewDate] = useState(new_date);\r\n\r\n    const week = new Array('일', '월', '화', '수', '목', '금', '토');\r\n\r\n    const calendarActive = props.calendarActive;\r\n    const setCalendarActiveIndex = props.setCalendarActiveIndex;\r\n\r\n\r\n    //모달 내 선택한 날짜 상단 표시\r\n    const selectedDate = newDate.toJSON().substring(0,10);\r\n\r\n    let selectedYear = newDate.getFullYear();\r\n    let selectedMonth = newDate.getMonth()+1;\r\n    let selectedDay = newDate.getDate();\r\n    let selectedLabel = newDate.getDay();\r\n    let todayLabel = week[selectedLabel];\r\n\r\n\r\n        //모달 날짜 바꾸기 캘린더 확인 핸들러\r\n        const todoModalDateChangeHandler = (e) => {\r\n            const goal_id = parseInt(e.currentTarget.dataset.goalid);\r\n            const todo_id = parseInt(e.currentTarget.dataset.todoid);\r\n            todoDataArray.map((data)=>\r\n                data.todos.map((todo)=> {\r\n                    if(todo.goalId === goal_id && todo.todoId === todo_id && todo.date === todo.endRepeatDate){\r\n                    todo.date = selectedDate;\r\n                    todo.endRepeatDate = selectedDate;\r\n                    }\r\n                })\r\n            )\r\n            setCalendarActiveIndex(null)\r\n        }\r\n\r\n\r\n    return (\r\n        <Modal open={calendarActive}\r\n        onClose={()=>{setCalendarActiveIndex(null)}}\r\n        aria-labelledby=\"calendar-title\"\r\n        aria-describedby=\"calendar-description\"\r\n        className=\"calendar-wrap\"\r\n         >\r\n        <div className=\"calendar-box\">\r\n            <LocalizationProvider locale={ko} dateAdapter={AdapterDateFns}>\r\n                <div className=\"calendar-title-wrap\">\r\n                    <p>선택한 날짜</p>\r\n                    <span>{selectedYear +`년 `+ selectedMonth +`월 `+ selectedDay+ `일 ` + todayLabel + `요일`}</span>\r\n                </div>\r\n                <CalendarPicker className=\"calendar-picker\" date={newDate} onChange={(newDate) => setNewDate(newDate)} />\r\n                <div className=\"calendar-btn-box\">\r\n                    <button className=\"calendar-ok-btn\" \r\n                    data-goalid={todos.goalId}\r\n                    data-todoid={todos.todoId}\r\n                    data-selecteddate={selectedDate} \r\n                    onClick={todoModalDateChangeHandler}>\r\n                        확인\r\n                    </button> \r\n                    <button className=\"calendar-cancel-btn\" \r\n                    onClick={()=>{setCalendarActiveIndex(null)}}>\r\n                        취소\r\n                </button>\r\n                </div>\r\n            </LocalizationProvider>\r\n        </div>\r\n        </Modal>  \r\n    )\r\n\r\n\r\n}"]},"metadata":{},"sourceType":"module"}